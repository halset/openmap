# **********************************************************************
# 
#  BBN Corporation
#  10 Moulton St.
#  Cambridge, MA 02138
#  (617) 873-2000
# 
#  Copyright (C) 1997
#  This software is subject to copyright protection under the laws of 
#  the United States and other countries.
# 
# **********************************************************************
# 
# $Source: /cvs/distapps/openmap/Attic/NewVersion-HOWTO,v $
# $RCSfile: NewVersion-HOWTO,v $
# $Revision: 1.2 $
# $Date: 1998/08/28 18:54:22 $
# $Author: aculline $
# 
# **********************************************************************


This file details how to package up OpenMap into a release version.  Basically
you check out a fresh version of OpenMap, bump the version number in
Environment.java to a stable release version, commit the change, cvs tag and
branch, and then run the autobuild script to compile it.  After the autobuild
completes, you include all the appropriate stuff out of the build directory and
etc/ directory into the new openmap-<version>/ release directory.

0) Pre branch
-------------

Make sure the etc/ files README-install, README-runtime, .omprefs, overlays.txt,
openmap.html, OpenMap, OpenMap.bat, etc all make sense for this version.  Make
sure the README instructions make sense and are up-to-date.

Check the autobuild script to make sure it's going to include the correct
files in the final (tar|zip)balls.


1) Branch the sources
---------------------

Check out the version of OpenMap you want into your own openmap directory.

	cvs co openmap

Change the hardcoded version number in the Environment.java file to a stable
release number.  We use the Linux development model where even minor numbers
are stable releases, and odd minor numbers are development versions.  Any 3rd
numbers are the patchlevel of the particular branch.  You should only tag,
branch, and release versions like 2.0, 2.2, 3.0, etc.

Tag this version of the openmap source tree.  Do a...

	cvs tag -b OpenMap_<major>_<minor> openmap

...where <major> and <minor> constitute the OpenMap version as hardcoded
in Environment.java.

Commit this version back to the source tree.

	cvs commit -r OpenMap_<major>_<minor> openmap


2) Run the autobuild
--------------------

Run the autobuild script.  Try autobuild --help for a list of up-to-date
arguments to the script.  Usually you will do something like...

	./autobuild -d /tmp/openmap-<version> -t OpenMap_<major>_<minor>

...although you might have to specify additional arguments and envvars.

Once the script has finished running you will have the .tar.gz, tar.Z, and
.zip versions of the OpenMap distribution.  You may want to verify that they
do indeed work as advertised.  Refer to the Testing-HOWTO for the test
sequence.


3) Post branch
--------------

Check out the sources from the main branch into your own openmap directory.

	cvs update -A openmap

Bump the version number in the Environment.java file to the next development
version and commit it back in to the main branch.

	cvs commit openmap/com/bbn/openmap/Environment.java

Copy the release files out to the javamap/openmap FTP directories, and notify
our customers via email.
