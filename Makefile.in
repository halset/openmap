# **********************************************************************
# 
#    Use, duplication, or disclosure by the Government is subject to
# 	     restricted rights as set forth in the DFARS.
#  
# 			   BBN Technologies
# 			    A Division of
# 			   BBN Corporation
# 			  10 Moulton Street
# 			 Cambridge, MA 02138
# 			    (617) 873-3000
#  
# 	  Copyright 1998 by BBN Technologies, A Division of
# 		BBN Corporation, all rights reserved.
#  
# **********************************************************************
# 
# $Source: /cvs/distapps/openmap/Attic/Makefile.in,v $
# $RCSfile: Makefile.in,v $
# $Revision: 1.4 $
# $Date: 1998/11/09 21:19:55 $
# $Author: tmitchel $
# 
# **********************************************************************


TOP = @top_srcdir@

############
# includes #
############
include ${TOP}/openmap.mk


#####################
# variable settings #
#####################

CORE.JAR =	com/bbn/util/*.class \
		com/bbn/util/cacheHandler/*.class \
		com/bbn/util/stateMachine/*.class \
		com/bbn/openmap/*.class \
		com/bbn/openmap/*.gif \
		com/bbn/openmap/app/*.class \
		com/bbn/openmap/dted/*.class \
		com/bbn/openmap/event/*.class \
		com/bbn/openmap/examples/*.class \
		com/bbn/openmap/gui/*.class \
		com/bbn/openmap/gui/*.gif \
		com/bbn/openmap/html/*.class \
		com/bbn/openmap/http/*.class \
		com/bbn/openmap/nitf/*.class \
		com/bbn/openmap/omGraphics/*.class \
		com/bbn/openmap/pluginLayer/*.class \
		com/bbn/openmap/proj/*.class \
		com/bbn/openmap/rpf/*.class \
		com/bbn/openmap/shape/*.class \
		com/bbn/openmap/terrain/*.class \
		com/bbn/openmap/util/*.class \
		com/bbn/openmap/vpf/*.class \
		com/boutell/gd/*.class

#########
# rules #
#########

default:	om_core

# java compile OpenMap code
om_core:
	cd com && $(MAKE) all

jar: 	om_core lib/openmap.jar

all:	om_core jar

clean distclean::
	cd com && $(MAKE) $@

distclean::
	$(RM) Makefile openmap.mk bin/openmap
	$(RM) config.cache config.log config.status

lib:
	${INSTALL.dir} $@

lib/openmap.jar: lib
	jar cf $@ ${CORE.JAR}

GNUmakefile:
	perl rename.pl gmakefile GNUmakefile

gmakefile:
	perl rename.pl GNUmakefile gmakefile

################
# installation #
################

${bindir}:
	${INSTALL.dir} $@

${libdir}:
	${INSTALL.dir} $@

${bindir}/openmap: ${bindir} bin/openmap
	${INSTALL.bin} bin/opemmap $@

install::	${bindir}/openmap

${bindir}/openmap.bash: ${bindir} bin/openmap.bash
	${INSTALL.bin} bin/opemmap.bash $@

install::	${bindir}/openmap.bash

${libdir}/openmap.jar: ${libdir} lib/openmap.jar
	${INSTALL.jar} lib/openmap.jar $@

install::	${libdir}/openmap.jar
